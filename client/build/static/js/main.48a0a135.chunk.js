(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),l=a.n(o),i=a(40),c=a(10),s=a(79),u=a(169),m=a(16),d=a(162),v=a(163),f=a(164),g=a(51),h=a(80),p=a(160),b=a(155),E=a(75),k=a.n(E);function S(){var e=r.a.useState(null),t=Object(m.a)(e,2),a=t[0],n=t[1],o=Object(c.e)(),l=function(){n(null)};return r.a.createElement("div",null,r.a.createElement(b.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(e){n(e.currentTarget)}},r.a.createElement(k.a,null)),r.a.createElement(h.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:l},r.a.createElement(p.a,{onClick:l},r.a.createElement(i.b,{to:"/",className:"/search"===o.pathname?"nav-link active":"nav-link"},"Search")),r.a.createElement(p.a,{onClick:l},r.a.createElement(i.b,{to:"/saved",className:"/saved"===o.pathname?"nav-link active":"nav-link"},"Saved"))))}var I=a(76),O=a(77),y=a(82),j=a(81),w=a(161);var C=function(e){return r.a.createElement(w.a,{onClick:e.onClick,style:{backgroundColor:"#fff",fontSize:"1rem"},startIcon:r.a.createElement("i",{className:"fab fa-google"})},e.children)},N=function(e){Object(y.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isSignedIn:null},e.onAuthChange=function(){e.setState({isSignedIn:e.auth.isSignedIn.get()})},e.onSignInClick=function(){e.auth.signIn().then((function(t){sessionStorage.setItem("currentUser",e.auth.currentUser.le.Tt.Bd),sessionStorage.setItem("currentEmail",e.auth.currentUser.le.Tt.Du),e.props.updateUser()}))},e.onSignOutClick=function(){e.auth.signOut().then((function(t){sessionStorage.clear(),e.props.updateUser()}))},e}return Object(O.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"638408205491-7hkejfdaqiuc2dq8m0kb2bn1jn4q4vs1.apps.googleusercontent.com",scope:"email"}).then((function(){e.auth=window.gapi.auth2.getAuthInstance(),e.setState({isSignedIn:e.auth.isSignedIn.get()}),e.auth.isSignedIn.listen(e.onAuthChange)}))}))}},{key:"renderAuthButton",value:function(){return null===this.state.isSignedIn?null:this.state.isSignedIn?r.a.createElement(C,{onClick:this.onSignOutClick},"Google Sign Out"):r.a.createElement(C,{onClick:this.onSignInClick},"Google Sign In")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,this.renderAuthButton()))}}]),a}(r.a.Component),x=Object(d.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}}));function B(){var e=x(),t=Object(n.useState)(),a=Object(m.a)(t,2),o=a[0],l=a[1];return r.a.createElement("div",{className:e.root},r.a.createElement(v.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(S,null),r.a.createElement(g.a,{variant:"h6",className:e.title},"Book-Zelf"),r.a.createElement(g.a,{variant:"h6",className:e.title}),r.a.createElement(g.a,{variant:"h6",className:e.title}),r.a.createElement(g.a,{variant:"h6",className:e.title}),r.a.createElement(g.a,{variant:"h6",className:e.title},o),r.a.createElement(g.a,{variant:"h6",className:e.title}),r.a.createElement(g.a,{variant:"h6",className:e.title}),r.a.createElement(g.a,{variant:"h6",className:e.title}),r.a.createElement(g.a,{variant:"h6",className:e.title},r.a.createElement(N,{updateUser:function(){sessionStorage.getItem("currentUser")?l(sessionStorage.getItem("currentUser")):l("")}})))))}var T=a(159),A=a(167),G=a(123),L=a(165),U=a(173),q=a(166),X=Object(d.a)((function(e){return{inline:{display:"inline"}}}));var F=function(e){var t=X();return r.a.createElement(G.a,{alignItems:"flex-start"},r.a.createElement(L.a,null,r.a.createElement(U.a,{alt:e.title,src:e.image,variant:"square"})),r.a.createElement(q.a,{primary:"".concat(e.title,", by: ").concat(e.authors),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"}),e.description)}))},W=a(35),z=a.n(W),D=a(50),H=a(36),_=a.n(H);a(117).config();var M={searchGoogle:function(){var e=Object(D.a)(z.a.mark((function e(t){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"AIzaSyC4OhWXg4XXTic12EI3RlBu_7SsG96Tcn4",e.next=4,_.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(t,"&filter=ebooks&maxResults=40&startIndex=0&key=").concat("AIzaSyC4OhWXg4XXTic12EI3RlBu_7SsG96Tcn4"));case 4:return a=e.sent,e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),getBooks:function(){return _.a.get("/api/books")},userBooks:function(e){return _.a.get("api/books/".concat(e))},saveBook:function(e){return _.a.post("/api/books",e)},deleteBook:function(e){return _.a.delete("/api/books/"+e)}},R=Object(d.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper}}}));var J=function(){var e=R(),t=sessionStorage.getItem("currentEmail"),a=Object(n.useState)([]),o=Object(m.a)(a,2),l=o[0],i=o[1];return Object(n.useEffect)((function(){M.userBooks(t).then((function(e){i(e.data)}))}),[]),r.a.createElement("div",null,r.a.createElement(T.a,{className:e.root},l.map((function(e){return r.a.createElement("div",null,r.a.createElement(F,{key:e._id,id:e.id,authors:e.authors,title:e.title,image:e.image,description:e.description}),r.a.createElement("button",{type:"button"},r.a.createElement("a",{href:e.view},"view")),r.a.createElement("button",{type:"button"},r.a.createElement("a",{onClick:function(){return a=e._id,void M.deleteBook(a).then((function(e){M.getBooks(t).then((function(e){i(e.data)}))}));var a}},"remove")),r.a.createElement(A.a,null))}))))},P=a(168),Z=a(122),K=a(170);a(120);var Q=function(e){return r.a.createElement("div",{className:"holder"},e.children)},V=a(171),Y=Object(d.a)((function(e){return{root:{"& > *":{marginTop:e.spacing(2)}}}}));var $=function(e){var t=Y();return r.a.createElement("div",{className:t.root},r.a.createElement(V.a,{count:e.count,color:"secondary",onChange:e.onChange,page:e.page}))},ee=a(172);function te(e){return r.a.createElement(ee.a,Object.assign({elevation:6,variant:"filled"},e,{severity:"error"}),"Must be signed in to save books")}var ae=Object(d.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper}}})),ne=function(e){var t=e.books,a=e.loading,o=ae(),l=sessionStorage.getItem("currentEmail"),i=Object(n.useState)(!1),c=Object(m.a)(i,2),s=c[0],u=c[1];function d(e){e.preventDefault();var a=e.target;console.log(t);for(var n=0;n<t.length;n++)if(t[n].id===a.id){var r={title:t[n].volumeInfo.title,user:l,authors:t[n].volumeInfo.authors,image:t[n].volumeInfo.imageLinks.smallThumbnail,description:t[n].volumeInfo.description,view:t[n].volumeInfo.infoLink};console.log(r),M.saveBook(r).then((function(e){console.log(e)})).catch((function(e){console.log(e),u(!0)}))}}return a?r.a.createElement("h2",null,"Loading..."):r.a.createElement(T.a,{className:o.root},t.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(F,{key:t,id:e.id,authors:e.volumeInfo.authors,title:e.volumeInfo.title,image:e.volumeInfo.imageLinks.smallThumbnail,description:e.volumeInfo.description}),r.a.createElement("button",{id:e.id,onClick:d,type:"submit"},"Save"),r.a.createElement("button",{type:"button"},r.a.createElement("a",{href:e.volumeInfo.infoLink},"view")),r.a.createElement(te,{style:s?{visibility:"visible"}:{visibility:"hidden"}}),r.a.createElement(A.a,null))})))},re=Object(d.a)({textbox:{backgroundColor:"white",width:"20vw"},btn:{marginTop:"17px"},blurbHolder:{maxWidth:"20vw",height:"92vh",backgroundColor:"#4caf50",marginTop:".5rem"},blurb:{fontFamily:"'Courgette', cursive",fontSize:"2rem",padding:"1rem"},listHolder:{maxWidth:"75vw",marginLeft:".5rem"}});var oe=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)({title:""}),i=Object(m.a)(l,2),c=i[0],s=i[1],u=Object(n.useState)(!1),d=Object(m.a)(u,2),v=d[0],f=d[1],h=Object(n.useState)(1),p=Object(m.a)(h,2),b=p[0],E=p[1],k=Object(n.useState)(10),S=Object(m.a)(k,1)[0],I=re();function O(){return(O=Object(D.a)(z.a.mark((function e(t){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,M.searchGoogle(t);case 4:a=e.sent,o(a.items),f(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.err(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var y=b*S,j=y-S,C=a.slice(j,y);return r.a.createElement("div",null,r.a.createElement(P.a,{container:!0,direction:"row",className:I.root},r.a.createElement(P.a,{item:!0},r.a.createElement(Z.a,{className:I.blurbHolder,square:!0},r.a.createElement(g.a,{className:I.blurb},"Find your next great read with Book-Zelf!"))),r.a.createElement(P.a,{item:!0},r.a.createElement(Q,null,r.a.createElement("form",null,r.a.createElement(K.a,{id:"standard-full-width",label:"Search For Books",style:{margin:8},placeholder:"Book Title",fullWidth:!0,variant:"filled",margin:"normal",InputLabelProps:{shrink:!0},onChange:function(e){var t=e.target.value.trim().toLowerCase();s({title:t})},className:I.textbox}),r.a.createElement(w.a,{onClick:function(e){e.preventDefault(),function(e){O.apply(this,arguments)}(c.title)},type:"submit",variant:"contained",color:"secondary",className:I.btn},"Submit"))),r.a.createElement(Z.a,{className:I.listHolder},r.a.createElement(ne,{books:C,loading:v}),a.length>0?r.a.createElement($,{count:4,page:b,onChange:function(e,t){E(t)}}):r.a.createElement(r.a.Fragment,null)))))},le=Object(s.a)({palette:{primary:{main:"#8d6e63"},secondary:{main:"#4caf50"}}});var ie=function(){return r.a.createElement(i.a,null,r.a.createElement(u.a,{theme:le},r.a.createElement("div",{className:"App"},r.a.createElement(B,null),r.a.createElement(c.a,{exact:!0,path:"/",component:oe}),r.a.createElement(c.a,{exact:!0,path:"/saved",component:J}))))};l.a.render(r.a.createElement(ie,null),document.getElementById("root"))},88:function(e,t,a){e.exports=a(121)}},[[88,1,2]]]);
//# sourceMappingURL=main.48a0a135.chunk.js.map